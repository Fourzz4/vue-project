import{_ as T,g as A,h as c,o as h,c as b,a as f,b as l,w as o,F as D,E as n,d as u,i as P}from"./index-6bee7998.js";import{c as U,E as L,a as W,b as $,d as z,e as N,f as S,g as q}from"./el-table-column-c982c5c9.js";import{b as O,c as R,d as j,e as G,f as H}from"./ums-admin-39a72e62.js";import{b as J,E as K,a as Q,c as X}from"./index-ac99b8f7.js";const Y=A({data(){return{searchText:"",coupons:[],adMins:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,adMin:{createTime:"",email:"",icon:"",id:0,loginTime:"",nickName:"",note:"",password:"",status:0,username:""},formLabelWidth:100,rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"},{min:8,message:"账号长度不能少于8个字符",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:8,message:"密码长度不能少于8个字符",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}]}}},mounted(){this.getAdMinsPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adMin=U(e)},getAdMinsPage(e){O({current:e,size:3}).then(t=>{console.log(t);const p=t.data.page;this.adMins=p.records,this.page=p}).catch(t=>{console.log(t)})},currentchange(e){this.getAdMinsPage(e),this.page.current=e},refresh(){this.getAdMinsPage(this.page.current),n({message:"刷新成功",type:"success"})},clearSearchInput(){this.searchText="",n({message:"搜索框内容已清空",type:"success"})},del(e){L.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const a={id:e};n({message:"删除成功",type:"success"}),R(a).then(t=>{if(t.success)this.getAdMinsPage(this.page.current);else return console.log(t.msg),!1}).catch(t=>{console.log(t)})}).catch(()=>{n({message:"取消删除",type:"warning"})})},toAdd(){this.adMin={createTime:"",email:"",icon:"",id:0,loginTime:"",nickName:"",note:"",password:"",status:0,username:""},this.dialogFormVisible=!0},selectById(){this.dialogFormVisibleById=!0},getById(e){this.coupons=[],j({id:e}).then(t=>{this.dialogFormVisibleById=!1,this.coupons.push(t.data.help);const p=this.coupons;this.adMins=p,n({message:"查询成功",type:"success"})}).catch(t=>{n({message:"查询的ID不存在",type:"warning"}),console.log(t)})},save(){const e=this.adMin;e.id==0?G(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdMinsPage(this.page.current),n({message:"添加成功",type:"success"});else return n({message:"添加失败",type:"error"}),!1}).catch(a=>{n({message:"请查看输入内容或格式是否有误！",type:"error"})}):H(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdMinsPage(this.page.current),n({message:"更新成功",type:"success"});else return n({message:"更新失败",type:"error"}),!1}).catch(a=>{n({message:"请查看输入内容或格式是否有误！",type:"error"})})}}}),Z={class:"adMins"},x={class:"admin-tools"},ee=["src"],le={key:1},ae={class:"dialog-footer"},oe={class:"search-input-wrapper"},se={class:"dialog-footer"};function te(e,a,t,p,ne,ie){const M=c("Refresh"),g=P,i=J,_=c("Plus"),d=N,k=c("Edit"),C=c("Delete"),E=W,I=$,m=K,r=Q,V=S,F=q,y=X,v=c("Check"),w=z;return h(),b(D,null,[f("div",Z,[f("div",x,[l(i,{type:"warning",color:"#006699",onClick:e.refresh},{default:o(()=>[l(g,null,{default:o(()=>[l(M)]),_:1}),u("刷新")]),_:1},8,["onClick"]),l(i,{type:"warning",color:"#006699",onClick:e.toAdd},{default:o(()=>[l(g,null,{default:o(()=>[l(_)]),_:1}),u("添加")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:e.selectById,icon:"Search"},{default:o(()=>[u("按ID查询")]),_:1},8,["onClick"])]),l(E,{data:e.adMins,style:{width:"100%"}},{default:o(()=>[l(d,{fixed:"",prop:"id",label:"id",width:"50"}),l(d,{prop:"username",label:"用户名"}),l(d,{prop:"icon",label:"头像"},{default:o(({row:s})=>[s.icon?(h(),b("img",{key:0,src:s.icon,style:{width:"50px",height:"50px"}},null,8,ee)):(h(),b("span",le,"无头像"))]),_:1}),l(d,{prop:"email",label:"邮箱"}),l(d,{prop:"nickName",label:"昵称"}),l(d,{prop:"note",label:"备注信息"}),l(d,{prop:"createTime",label:"创建时间"}),l(d,{prop:"loginTime",label:"最后登录时间"}),l(d,{prop:"status",label:"帐号启用状态"}),l(d,{fixed:"right",label:"操作",width:"120"},{default:o(s=>[l(i,{link:"",type:"primary",size:"small",onClick:B=>e.toEdit(s.row)},{default:o(()=>[l(g,null,{default:o(()=>[l(k)]),_:1}),u("更新")]),_:2},1032,["onClick"]),l(i,{link:"",type:"danger",size:"small",onClick:B=>e.del(s.row.id)},{default:o(()=>[l(g,null,{default:o(()=>[l(C)]),_:1}),u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(I,{background:"",layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=s=>e.dialogFormVisible=s),title:"admin编辑"},{footer:o(()=>[f("span",ae,[l(i,{onClick:a[7]||(a[7]=s=>e.dialogFormVisible=!1)},{default:o(()=>[u("取消")]),_:1}),l(i,{type:"primary",onClick:e.save},{default:o(()=>[l(g,null,{default:o(()=>[l(v)]),_:1}),u("保存")]),_:1},8,["onClick"])])]),default:o(()=>[l(y,{model:e.adMin},{default:o(()=>[l(r,{label:"用户名",prop:"username",rules:e.rules.username,"label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.username,"onUpdate:modelValue":a[0]||(a[0]=s=>e.adMin.username=s),autocomplete:"off",placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1},8,["rules","label-width"]),l(r,{label:"密码",prop:"password",rules:e.rules.password,"label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.password,"onUpdate:modelValue":a[1]||(a[1]=s=>e.adMin.password=s),type:"text",autocomplete:"off",placeholder:"请输入密码","show-password":!0},null,8,["modelValue"])]),_:1},8,["rules","label-width"]),l(r,{label:"头像","label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.icon,"onUpdate:modelValue":a[2]||(a[2]=s=>e.adMin.icon=s),autocomplete:"off",placeholder:"请输入头像网页http链接"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"邮箱",prop:"email",rules:e.rules.email,"label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.email,"onUpdate:modelValue":a[3]||(a[3]=s=>e.adMin.email=s),autocomplete:"off",placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1},8,["rules","label-width"]),l(r,{label:"昵称","label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.nickName,"onUpdate:modelValue":a[4]||(a[4]=s=>e.adMin.nickName=s),autocomplete:"off",placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"备注信息","label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.adMin.note,"onUpdate:modelValue":a[5]||(a[5]=s=>e.adMin.note=s),autocomplete:"off",placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"状态","label-width":e.formLabelWidth},{default:o(()=>[l(F,{modelValue:e.adMin.status,"onUpdate:modelValue":a[6]||(a[6]=s=>e.adMin.status=s),placeholder:"please select your zone"},{default:o(()=>[l(V,{label:"启用(1)",value:"1"}),l(V,{label:"禁用(0)",value:"0"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(w,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":a[12]||(a[12]=s=>e.dialogFormVisibleById=s),title:"查询"},{footer:o(()=>[f("span",se,[l(i,{onClick:a[11]||(a[11]=s=>e.dialogFormVisibleById=!1)},{default:o(()=>[u("取消")]),_:1})])]),default:o(()=>[l(y,{model:e.adMin},{default:o(()=>[l(r,{label:"请输入ID","label-width":e.formLabelWidth},{default:o(()=>[f("div",oe,[l(m,{modelValue:e.searchText,"onUpdate:modelValue":a[9]||(a[9]=s=>e.searchText=s),placeholder:"按ID查询,请输入ID",autocomplete:"off",class:"search-input"},null,8,["modelValue"]),l(i,{type:"primary",icon:"Search",onClick:a[10]||(a[10]=s=>e.getById(e.searchText))}),l(i,{type:"danger",icon:"Delete",onClick:e.clearSearchInput,class:"search-clear-btn"},null,8,["onClick"])])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const pe=T(Y,[["render",te],["__scopeId","data-v-9b43ed65"]]);export{pe as default};
